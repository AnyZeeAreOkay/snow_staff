--TODO : Commenting!
--	Add a craft recipe
--	Reduce radius
--	Remove snow since I don't need it anymore
--	Check for player protection, and nodes in
--	spawning area (Possible solution, change it from a circle to a square,
	--but check for air nodes first?
minetest.register_tool("snow_staff:snow_staff", {
        description = "Snow Staff",
        inventory_image = "snow_staff_snow_staff.png",
        full_punch_interval = 0.2,
        range=30,
    		liquids_pointable = true,
        on_use = function (itemstack, user, pointed_thing)
        local pos = minetest.get_pointed_thing_position(pointed_thing)
        if pointed_thing.type == "node" or pointed_thing.type == "object" then
          local node = minetest.get_node(pos)
              if pos then
              local mypos = minetest.pos_to_string(pos)
              local pos = {x = pos.x, y = pos.y+20, z = pos.z}
              local node = minetest.get_node(pos)
              if node.name == "ignore" or node.name ~= "air" == true then
              return end
	-- I know this next part isn't pretty, but the thing it makes in-game, is :D
              minetest.bulk_set_node({{x = pos.x, y = pos.y, z = pos.z}, {x = pos.x+1, y = pos.y, z = pos.z}, {x = pos.x+2, y = pos.y, z = pos.z}, {x = pos.x+3, y = pos.y, z = pos.z}, {x = pos.x+4, y = pos.y, z = pos.z}, {x = pos.x+5, y = pos.y, z = pos.z}, {x = pos.x+6, y = pos.y, z = pos.z}, {x = pos.x+7, y = pos.y, z = pos.z}, {x = pos.x-1, y = pos.y, z = pos.z}, {x = pos.x-2, y = pos.y, z = pos.z}, {x = pos.x-3, y = pos.y, z = pos.z}, {x = pos.x-4, y = pos.y, z = pos.z}, {x = pos.x-5, y = pos.y, z = pos.z}, {x = pos.x-6, y = pos.y, z = pos.z}, {x = pos.x-7, y = pos.y, z = pos.z}, {x = pos.x, y = pos.y, z = pos.z+1}, {x = pos.x+1, y = pos.y, z = pos.z+1}, {x = pos.x+2, y = pos.y, z = pos.z+1}, {x = pos.x+3, y = pos.y, z = pos.z+1}, {x = pos.x+4, y = pos.y, z = pos.z+1}, {x = pos.x+5, y = pos.y, z = pos.z+1}, {x = pos.x+6, y = pos.y, z = pos.z+1}, {x = pos.x+7, y = pos.y, z = pos.z+1}, {x = pos.x-1, y = pos.y, z = pos.z+1}, {x = pos.x-2, y = pos.y, z = pos.z+1}, {x = pos.x-3, y = pos.y, z = pos.z+1}, {x = pos.x-4, y = pos.y, z = pos.z+1}, {x = pos.x-5, y = pos.y, z = pos.z-1}, {x = pos.x-6, y = pos.y, z = pos.z-1}, {x = pos.x-7, y = pos.y, z = pos.z-1}, {x = pos.x+1, y = pos.y, z = pos.z-1}, {x = pos.x+2, y = pos.y, z = pos.z-1}, {x = pos.x+3, y = pos.y, z = pos.z-1}, {x = pos.x+4, y = pos.y, z = pos.z-1}, {x = pos.x+5, y = pos.y, z = pos.z-1}, {x = pos.x+6, y = pos.y, z = pos.z-1}, {x = pos.x+7, y = pos.y, z = pos.z-1}, {x = pos.x-1, y = pos.y, z = pos.z-1}, {x = pos.x-2, y = pos.y, z = pos.z-1}, {x = pos.x-3, y = pos.y, z = pos.z-1}, {x = pos.x-4, y = pos.y, z = pos.z-1}, {x = pos.x-5, y = pos.y, z = pos.z-1}, {x = pos.x-6, y = pos.y, z = pos.z-1}, {x = pos.x-7, y = pos.y, z = pos.z-1}, {x = pos.x, y = pos.y, z = pos.z-1}, {x = pos.x-5, y = pos.y, z = pos.z+1}, {x = pos.x-6, y = pos.y, z = pos.z+1}, {x = pos.x-7, y = pos.y, z = pos.z+1}, {x = pos.x, y = pos.y, z = pos.z+2}, {x = pos.x, y = pos.y, z = pos.z+2}, {x = pos.x, y = pos.y, z = pos.z+2}, {x = pos.x, y = pos.y, z = pos.z+2}, {x = pos.x, y = pos.y, z = pos.z+2}, {x = pos.x+1, y = pos.y, z = pos.z+2}, {x = pos.x+2, y = pos.y, z = pos.z+2}, {x = pos.x+3, y = pos.y, z = pos.z+2}, {x = pos.x+4, y = pos.y, z = pos.z+2}, {x = pos.x+5, y = pos.y, z = pos.z+2}, {x = pos.x+6, y = pos.y, z = pos.z+2}, {x = pos.x+7, y = pos.y, z = pos.z+2}, {x = pos.x-1, y = pos.y, z = pos.z+2}, {x = pos.x-2, y = pos.y, z = pos.z+2}, {x = pos.x-3, y = pos.y, z = pos.z+2}, {x = pos.x-4, y = pos.y, z = pos.z+2}, {x = pos.x-5, y = pos.y, z = pos.z+2}, {x = pos.x-6, y = pos.y, z = pos.z+2}, {x = pos.x-7, y = pos.y, z = pos.z+2}, {x = pos.x, y = pos.y, z = pos.z+3}, {x = pos.x-6, y = pos.y, z = pos.z+3}, {x = pos.x-5, y = pos.y, z = pos.z+3}, {x = pos.x-4, y = pos.y, z = pos.z+3}, {x = pos.x-3, y = pos.y, z = pos.z+3}, {x = pos.x-2, y = pos.y, z = pos.z+3}, {x = pos.x-1, y = pos.y, z = pos.z+3}, {x = pos.x+1, y = pos.y, z = pos.z+3}, {x = pos.x+2, y = pos.y, z = pos.z+3}, {x = pos.x+3, y = pos.y, z = pos.z+3}, {x = pos.x+4, y = pos.y, z = pos.z+3}, {x = pos.x+5, y = pos.y, z = pos.z+3}, {x = pos.x+6, y = pos.y, z = pos.z+3}, {x = pos.x, y = pos.y, z = pos.z+4}, {x = pos.x+1, y = pos.y, z = pos.z+4}, {x = pos.x+2, y = pos.y, z = pos.z+4}, {x = pos.x+3, y = pos.y, z = pos.z+4}, {x = pos.x+4, y = pos.y, z = pos.z+4}, {x = pos.x+5, y = pos.y, z = pos.z+4}, {x = pos.x+6, y = pos.y, z = pos.z+4}, {x = pos.x-6, y = pos.y, z = pos.z+4}, {x = pos.x-5, y = pos.y, z = pos.z+4}, {x = pos.x-4, y = pos.y, z = pos.z+4}, {x = pos.x-3, y = pos.y, z = pos.z+4}, {x = pos.x-2, y = pos.y, z = pos.z+4}, {x = pos.x-1, y = pos.y, z = pos.z+4}, {x = pos.x-5, y = pos.y, z = pos.z+5}, {x = pos.x-4, y = pos.y, z = pos.z+5}, {x = pos.x-3, y = pos.y, z = pos.z+5}, {x = pos.x-2, y = pos.y, z = pos.z+5}, {x = pos.x-1, y = pos.y, z = pos.z+5}, {x = pos.x+1, y = pos.y, z = pos.z+5}, {x = pos.x+2, y = pos.y, z = pos.z+5}, {x = pos.x+3, y = pos.y, z = pos.z+5}, {x = pos.x+4, y = pos.y, z = pos.z+5}, {x = pos.x+5, y = pos.y, z = pos.z+5}, {x = pos.x, y = pos.y, z = pos.z+5}, {x = pos.x, y = pos.y, z = pos.z+6}, {x = pos.x+1, y = pos.y, z = pos.z+6}, {x = pos.x-1, y = pos.y, z = pos.z+6}, {x = pos.x+2, y = pos.y, z = pos.z+6}, {x = pos.x-2, y = pos.y, z = pos.z+6}, {x = pos.x+3, y = pos.y, z = pos.z+6}, {x = pos.x-3, y = pos.y, z = pos.z+6}, {x = pos.x+4, y = pos.y, z = pos.z+6}, {x = pos.x-4, y = pos.y, z = pos.z+6}, {x = pos.x, y = pos.y, z = pos.z+7}, {x = pos.x+1, y = pos.y, z = pos.z+7}, {x = pos.x-1, y = pos.y, z = pos.z+7}, {x = pos.x+2, y = pos.y, z = pos.z+7}, {x = pos.x-2, y = pos.y, z = pos.z+7}, {x = pos.x, y = pos.y, z = pos.z-2}, {x = pos.x-1, y = pos.y, z = pos.z-2}, {x = pos.x+1, y = pos.y, z = pos.z-2}, {x = pos.x-2, y = pos.y, z = pos.z-2}, {x = pos.x+2, y = pos.y, z = pos.z-2}, {x = pos.x-3, y = pos.y, z = pos.z-2}, {x = pos.x+3, y = pos.y, z = pos.z-2}, {x = pos.x-4, y = pos.y, z = pos.z-2}, {x = pos.x+4, y = pos.y, z = pos.z-2}, {x = pos.x-5, y = pos.y, z = pos.z-2}, {x = pos.x+5, y = pos.y, z = pos.z-2}, {x = pos.x-6, y = pos.y, z = pos.z-2}, {x = pos.x+6, y = pos.y, z = pos.z-2}, {x = pos.x-7, y = pos.y, z = pos.z-2}, {x = pos.x+7, y = pos.y, z = pos.z-2}, {x = pos.x, y = pos.y, z = pos.z-3}, {x = pos.x-1, y = pos.y, z = pos.z-3}, {x = pos.x+1, y = pos.y, z = pos.z-3}, {x = pos.x-2, y = pos.y, z = pos.z-3}, {x = pos.x+2, y = pos.y, z = pos.z-3}, {x = pos.x-3, y = pos.y, z = pos.z-3}, {x = pos.x+3, y = pos.y, z = pos.z-3}, {x = pos.x-4, y = pos.y, z = pos.z-3}, {x = pos.x+4, y = pos.y, z = pos.z-3}, {x = pos.x-5, y = pos.y, z = pos.z-3}, {x = pos.x+5, y = pos.y, z = pos.z-3}, {x = pos.x-6, y = pos.y, z = pos.z-3}, {x = pos.x+6, y = pos.y, z = pos.z-3}, {x = pos.x, y = pos.y, z = pos.z-4}, {x = pos.x-1, y = pos.y, z = pos.z-4}, {x = pos.x+1, y = pos.y, z = pos.z-4}, {x = pos.x-2, y = pos.y, z = pos.z-4}, {x = pos.x+2, y = pos.y, z = pos.z-4}, {x = pos.x-3, y = pos.y, z = pos.z-4}, {x = pos.x+3, y = pos.y, z = pos.z-4}, {x = pos.x-4, y = pos.y, z = pos.z-4}, {x = pos.x+4, y = pos.y, z = pos.z-4}, {x = pos.x-5, y = pos.y, z = pos.z-4}, {x = pos.x+5, y = pos.y, z = pos.z-4}, {x = pos.x-6, y = pos.y, z = pos.z-4}, {x = pos.x+6, y = pos.y, z = pos.z-4}, {x = pos.x, y = pos.y, z = pos.z-5}, {x = pos.x-1, y = pos.y, z = pos.z-5}, {x = pos.x+1, y = pos.y, z = pos.z-5}, {x = pos.x-2, y = pos.y, z = pos.z-5}, {x = pos.x+2, y = pos.y, z = pos.z-5}, {x = pos.x-3, y = pos.y, z = pos.z-5}, {x = pos.x+3, y = pos.y, z = pos.z-5}, {x = pos.x-4, y = pos.y, z = pos.z-5}, {x = pos.x+4, y = pos.y, z = pos.z-5}, {x = pos.x-5, y = pos.y, z = pos.z-5}, {x = pos.x+5, y = pos.y, z = pos.z-5}, {x = pos.x, y = pos.y, z = pos.z-6}, {x = pos.x-1, y = pos.y, z = pos.z-6}, {x = pos.x+1, y = pos.y, z = pos.z-6}, {x = pos.x-2, y = pos.y, z = pos.z-6}, {x = pos.x+2, y = pos.y, z = pos.z-6}, {x = pos.x-3, y = pos.y, z = pos.z-6}, {x = pos.x+3, y = pos.y, z = pos.z-6}, {x = pos.x-4, y = pos.y, z = pos.z-6}, {x = pos.x+4, y = pos.y, z = pos.z-6}, {x = pos.x, y = pos.y, z = pos.z-7}, {x = pos.x-1, y = pos.y, z = pos.z-7}, {x = pos.x+1, y = pos.y, z = pos.z-7}, {x = pos.x-2, y = pos.y, z = pos.z-7}, {x = pos.x+2, y = pos.y, z = pos.z-7}},  {name="default:snow"})
              minetest.check_for_falling(pos)
end
end
end
}
)
